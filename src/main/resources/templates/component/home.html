<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<style>
	.chatbox {
		position: fixed;
		bottom: 70px; /* Điều chỉnh chiều cao để di chuyển lên */
		right: 20px;
		margin-bottom: 40px;
		z-index: 1000;
	}

	.chat-toggle {
		background-color: #007bff; /* Màu nền của nút chat */
		color: white;
		border: none;
		border-radius: 50%;
		padding: 15px;
		cursor: pointer;
		font-size: 20px;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
	}

	.chat-window {
		position: absolute;
		bottom: 50px; /* Đặt khoảng cách từ đáy */
		right: 0;
		width: 300px; /* Chiều rộng của cửa sổ chat */
		background-color: white;
		border: 1px solid #ccc;
		border-radius: 8px;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
		display: flex;
		flex-direction: column;
	}

	.chat-header {
		background-color: #007bff;
		color: white;
		padding: 10px;
		border-top-left-radius: 8px;
		border-top-right-radius: 8px;
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.chat-body {
		flex: 1;
		padding: 10px;
		overflow-y: auto;
		max-height: 300px;
	}

	.chat-footer {
		display: flex;
		padding: 10px;
	}

	.chat-footer input {
		flex: 1;
		padding: 8px;
		border: 1px solid #ccc;
		border-radius: 4px;
	}

	.chat-close {
		background: none;
		border: none;
		color: white;
		font-size: 18px;
		cursor: pointer;
	}

</style>
<div class="container">
	<div class="row">
		<div class="col-xl-9 col-lg-12 col-md-12 col-sm-12 mt-3">
			<div class="d-flex">
				<ul class="navbar-nav border rounded px-3 d-xl-block d-none me-4"
					style="width: 335px;">
					<li class="nav-item" th:each="cate : ${cates}"><a
						class="nav-link active fw-semibold" aria-current="page"
						th:href="@{/category/{id}(id=${cate.id})}"> <span
							th:text="${cate.name}"></span>
					</a></li>
				</ul>
				<div id="carouselExampleIndicators"
					class="carousel slide carousel-fade caro" data-bs-ride="carousel"
					data-bs-interval="2500">
					<div class="carousel-indicators">
						<div th:each="s, iterStat : ${session.slides}">
							<button type="button" data-bs-target="#carouselExampleIndicators"
								th:data-bs-slide-to="${iterStat.index}"
								th:classappend="${iterStat.index == 0} ? 'active' : ''"
								th:attr="aria-label='Slide ' + ${iterStat.index + 1}"></button>
						</div>
					</div>
					<div class="carousel-inner rounded">
						<div class="carousel-item"
							th:each="s, iterStat : ${session.slides}"
							th:classappend="${iterStat.index == 0} ? 'active' : ''">
							<img th:src="@{|/images/${s.image}|}" class="d-block w-100"
								alt="" />
						</div>
					</div>
					<button class="carousel-control-prev" type="button"
						data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Previous</span>
					</button>
					<button class="carousel-control-next" type="button"
						data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Next</span>
					</button>
				</div>
			</div>
		</div>
		<!-- Bên phải (4 phần) -->
		<div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 mt-2">
			<div class="row">
				<div class="col-xl-12 col-lg-6 col-md-6 col-6 parent1 list_product">
					<img src="images/VPN (2)-23095.png" class="img-fluid rounded"
						alt="Right Image 1" width="100%">
				</div>
				<div class="col-xl-12 col-md-6 col-6 parent2 list_product">
					<img src="images/Spotify (1)-72615.png" class="img-fluid rounded"
						alt="Right Image 2" width="100%">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container mt-2">
	<div class="row">
		<div class="col-md-3 col-6 list_product">
			<img src="images/Steam (1)-46684.png" class="img-fluid mt-2 rounded"
				alt="Right Image 2" width="100%">
		</div>
		<div class="col-md-3 col-6 list_product">
			<img src="images/ThietKe-36571.png" class="img-fluid mt-2 rounded"
				alt="Right Image 2" width="100%">
		</div>
		<div class="col-md-3 col-6 list_product">
			<img src="images/AntiVirus99k-61638.png"
				class="img-fluid rounded parent3" alt="Right Image 2" width="100%">
		</div>
		<div class="col-md-3 col-6 list_product">
			<img src="images/Microsoft Office (4)-77805.png"
				class="img-fluid rounded parent3" alt="Right Image 2" width="100%">
		</div>
	</div>
</div>
<br>
<div class="container mt-2">
	<div class="row">
		<div class="col-xl-10 col-8">
			<h4 class="fw-bolder">Sản phẩm nổi bật</h4>
			<h6 class="text-secondary text_product">Danh sách những sản phẩm
				theo xu hướng mà có thể bạn sẽ thích</h6>
		</div>
		<div class="col-xl-2 col-4 d-flex justify-content-end">
			<a href="" class="btn btn-primary " style="height: 40px;">Khám
				Phá</a>
		</div>
	</div>
</div>
<div class="container mt-2">

	<div class="row">
		<div class="col-lg-3 col-md-4 col-6 list_product"
			th:each="product : ${session.products}">
			<a th:href="@{|/${product.id}|}"> <img
				th:src="@{'/images/'+${product.image}}"
				class="img-fluid mt-2 rounded" alt="Product Image" width="100%">
			</a> <a th:href="@{|/${product.id}|}" class="d-block mt-2 text_product"
				th:text="${product.name}"></a>
			<h6 class="mt-2 mb-3 d-flex align-items-center fw-bold text_product">
				<span
					th:text="${#numbers.formatDecimal(product.price * (1 - product.discount / 100), 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
				<strike class="mx-2 text-secondary" th:if="${product.discount} > 0"
					th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'đ'"></strike>
				<span class="badge text-bg-danger text-white p-2"
					th:if="${product.discount.intValue} > 0"
					th:text="${'-' + product.discount.intValue() + '%'}"></span>
			</h6>
		</div>
	</div>
</div>

<div class="container">
	<hr>
	<h4 class="mt-4 fw-bolder">Từ Khóa Nổi Bật</h4>
	<div class="row mt-4">
		<div class="col-md-2 col-4 list_keyword">
			<button type="button" class="btn rounded text-white fw-semibold"
				style="width: 100%; height: 65px; background-color: #3d5b81;">Làm
				Việc</button>
		</div>
		<div class="col-md-2 col-4 list_keyword">
			<button type="button" class="btn rounded text-white fw-semibold"
				style="width: 100%; height: 65px; background-color: #98c0d9;">Giải
				Trí</button>
		</div>
		<div class="col-md-2 col-4 list_keyword">
			<button type="button" class="btn rounded text-white fw-semibold"
				style="width: 100%; height: 65px; background-color: #ee6b4d;">Học
				Tập</button>
		</div>
		<div class="col-md-2 col-4 list_keyword">
			<button type="button"
				class="btn rounded text-white fw-semibold noibat"
				style="width: 100%; height: 65px; background-color: #293241;">Spotify</button>
		</div>
		<div class="col-md-2 col-4 list_keyword">
			<button type="button"
				class="btn  rounded text-white fw-semibold noibat"
				style="width: 100%; height: 65px; background-color: #545a66;">Wallet</button>
		</div>
		<div class="col-md-2 col-4 list_keyword">
			<button type="button"
				class="btn rounded text-white fw-semibold noibat"
				style="width: 100%; height: 65px; background-color: #757c86;">Youtube</button>
		</div>
	</div>
</div>

<div class="wrapper my-4">
	<div class="bg-image">
		<div class="container hot-product">
			<div class="row mx-1">
				<div class="col-xl-10 col-8">
					<div class="d-flex justify-content-center hot-text py-2 px-3">
						<i class="bi bi-graph-up-arrow fs-4 me-2 text-danger"></i>
						<h4 class="fw-bolder text-white text-truncate">#Sản phẩm bán
							chạy nhất</h4>
					</div>
				</div>
				<div class="col-xl-2 col-4 d-flex justify-content-end">
					<a href="" class="btn btn-primary " style="height: 40px;">Khám
						Phá</a>
				</div>
			</div>

			<div class="row mt-4">
				<div class="col-lg-3 col-md-4 col-6 list_product">
					<a href=""> <img src="./images/black myth wukong-13641.jpg"
						class="img-fluid mt-2 rounded" alt="Right Image 2" width="100%">
					</a> <a href="" class="d-block mt-2 text_product text-white">Black
						Myth: Wukong Black Black Myth: Wukong Black</a>
					<h6
						class="mt-2 mb-3 d-flex align-items-center fw-bold text_product text-white">
						122.000.000đ<strike class="mx-2 text-secondary">221.000.000đ</strike><span
							class="badge text-bg-danger text-white p-2">-62%</span>
					</h6>
				</div>
				<div class="col-lg-3 col-md-4 col-6 list_product">
					<a href=""> <img src="./images/black myth wukong-13641.jpg"
						class="img-fluid mt-2 rounded" alt="Right Image 2" width="100%">
					</a> <a href="" class="d-block mt-2 text_product text-white">Black
						Myth: Wukong Black Black Myth: Wukong Black</a>
					<h6
						class="mt-2 mb-3 d-flex align-items-center fw-bold text_product text-white">
						122.000.000đ<strike class="mx-2 text-secondary">221.000.000đ</strike><span
							class="badge text-bg-danger text-white p-2">-62%</span>
					</h6>
				</div>
				<div class="col-lg-3 col-md-4 col-6 list_product">
					<a href=""> <img src="./images/black myth wukong-13641.jpg"
						class="img-fluid mt-2 rounded" alt="Right Image 2" width="100%">
					</a> <a href="" class="d-block mt-2 text_product text-white">Black
						Myth: Wukong Black Black Myth: Wukong Black</a>
					<h6
						class="mt-2 mb-3 d-flex align-items-center fw-bold text_product text-white">
						122.000.000đ<strike class="mx-2 text-secondary">221.000.000đ</strike><span
							class="badge text-bg-danger text-white p-2">-62%</span>
					</h6>
				</div>
				<div class="col-lg-3 col-md-4 col-6 list_product">
					<a href=""> <img src="./images/black myth wukong-13641.jpg"
						class="img-fluid mt-2 rounded" alt="Right Image 2" width="100%">
					</a> <a href="" class="d-block mt-2 text_product text-white">Black
						Myth: Wukong Black Black Myth: Wukong Black</a>
					<h6
						class="mt-2 mb-3 d-flex align-items-center fw-bold text_product text-white">
						122.000.000đ<strike class="mx-2 text-secondary">221.000.000đ</strike><span
							class="badge text-bg-danger text-white p-2">-62%</span>
					</h6>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="container mt-2">
	<div class="row">
		<div class="col-md-6 col-8">
			<h4 class="fw-bolder">Game Trên Steam</h4>
			<h6>Những trò chơi được đánh giá tốt, nội dung hấp dẫn thu hút
				đang chờ bạn</h6>
		</div>
		<div class="col-md-6 d-flex justify-content-end col-4">
			<button type="button" class="btn btn-primary " style="height: 40px;">Khám
				Phá</button>
		</div>
	</div>
</div>
<div class="container mt-2">
	<div class="row">
		<div class="col-lg-3 col-md-4 col-6 list_product"
			th:each="product : ${session.gamesteam}">
			<a th:href="@{|/${product.id}|}"> <img
				th:src="@{'/images/'+${product.image}}"
				class="img-fluid mt-2 rounded" alt="Product Image" width="100%">
			</a> <a th:href="@{|/${product.id}|}" class="d-block mt-2 text_product"
				th:text="${product.name}"></a>
			<h6 class="mt-2 mb-3 d-flex align-items-center fw-bold text_product">
				<span
					th:text="${#numbers.formatDecimal(product.price * (1 - product.discount / 100), 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
				<strike class="mx-2 text-secondary" th:if="${product.discount} > 0"
					th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'đ'"></strike>
				<span class="badge text-bg-danger text-white p-2"
					th:if="${product.discount.intValue} > 0"
					th:text="${'-' + product.discount.intValue() + '%'}"></span>
			</h6>
		</div>
	</div>
</div>
<div class="container mt-2">
	<hr>
	<br>
	<div class="row">
		<div class="col-md-6 col-8">
			<h4 class="fw-bolder">Học Tập</h4>
		</div>
		<div class="col-md-6 d-flex justify-content-end col-4">
			<button type="button" class="btn btn-primary " style="height: 40px;">Khám
				Phá</button>
		</div>
	</div>
</div>
<div class="container mt-2">
	<div class="row">
		<div class="col-lg-3 col-md-4 col-6 list_product"
			th:each="product : ${session.hoctap}">
			<a th:href="@{|/${product.id}|}"> <img
				th:src="@{'/images/'+${product.image}}"
				class="img-fluid mt-2 rounded" alt="Product Image" width="100%">
			</a> <a th:href="@{|/${product.id}|}" class="d-block mt-2 text_product"
				th:text="${product.name}"></a>
			<h6 class="mt-2 mb-3 d-flex align-items-center fw-bold text_product">
				<span
					th:text="${#numbers.formatDecimal(product.price * (1 - product.discount / 100), 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
				<strike class="mx-2 text-secondary" th:if="${product.discount} > 0"
					th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'đ'"></strike>
				<span class="badge text-bg-danger text-white p-2"
					th:if="${product.discount.intValue} > 0"
					th:text="${'-' + product.discount.intValue() + '%'}"></span>
			</h6>
		</div>
	</div>
</div>
<div class="container mt-2">
	<hr>
	<br>
	<div class="row">
		<div class="col-md-6 col-8">
			<h4 class="fw-bolder">Làm việc</h4>
		</div>
		<div class="col-md-6 d-flex justify-content-end col-4">
			<button type="button" class="btn btn-primary " style="height: 40px;">Khám
				Phá</button>
		</div>
	</div>
</div>
<div class="container mt-2">
	<div class="row">
		<div class="col-lg-3 col-md-4 col-6 list_product"
			th:each="product : ${session.lamviec}">
			<a th:href="@{|/${product.id}|}"> <img
				th:src="@{'/images/'+${product.image}}"
				class="img-fluid mt-2 rounded" alt="Product Image" width="100%">
			</a> <a th:href="@{|/${product.id}|}" class="d-block mt-2 text_product"
				th:text="${product.name}"></a>
			<h6 class="mt-2 mb-3 d-flex align-items-center fw-bold text_product">
				<span
					th:text="${#numbers.formatDecimal(product.price * (1 - product.discount / 100), 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
				<strike class="mx-2 text-secondary" th:if="${product.discount} > 0"
					th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'đ'"></strike>
				<span class="badge text-bg-danger text-white p-2"
					th:if="${product.discount.intValue} > 0"
					th:text="${'-' + product.discount.intValue() + '%'}"></span>
			</h6>
		</div>
	</div>
	<br>
	<hr>
	<br> <br>
</div>
<div id="chatbox" class="chatbox">
	<button id="chat-toggle" class="chat-toggle">
		<i class="fas fa-comments"></i> <!-- Biểu tượng chat -->
	</button>
	<div class="chat-window" id="chat-window" style="display: none;">
		<div class="chat-header">
			<span>Chatbot</span>
			<button id="chat-close" class="chat-close">&times;</button>
		</div>
		<div class="chat-body">
			<!-- Nội dung chat sẽ hiển thị ở đây -->
			<div id="chat-content"></div>
		</div>
		<div class="chat-footer">
			<input type="text" id="chat-input" placeholder="Nhập tin nhắn...">
			<button id="send-message">Gửi</button>
		</div>
	</div>
</div>
<script>
	function toggleChat() {
		const chatWindow = document.getElementById("chatWindow");
		chatWindow.style.display = chatWindow.style.display === "none" ? "block" : "none";
	}

	async function sendMessage() {
		const userInput = document.getElementById("userInput");
		const chatBody = document.getElementById("chatBody");

		if (userInput.value.trim() === "") return;

		// Hiển thị tin nhắn người dùng
		const userMessage = document.createElement("div");
		userMessage.className = "user-message";
		userMessage.innerText = userInput.value;
		chatBody.appendChild(userMessage);

		// Gửi yêu cầu tới API ChatGPT
		const responseMessage = document.createElement("div");
		responseMessage.className = "bot-message";
		responseMessage.innerText = "Đang trả lời...";
		chatBody.appendChild(responseMessage);

		// API ChatGPT
		try {
			const response = await fetch("/api/chat", {
				method: "POST",
				headers: { "Content-Type": "application/json" },
				body: JSON.stringify({ message: userInput.value })
			});
			const data = await response.json();

			// Cập nhật phản hồi của ChatGPT
			responseMessage.innerText = data.reply;
		} catch (error) {
			responseMessage.innerText = "Có lỗi xảy ra. Vui lòng thử lại.";
		}

		userInput.value = "";  // Xóa nội dung nhập
		chatBody.scrollTop = chatBody.scrollHeight;  // Tự động cuộn xuống cuối
	}

</script>